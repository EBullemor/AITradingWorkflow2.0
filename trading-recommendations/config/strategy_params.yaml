# ===========================================
# Strategy Parameters Configuration
# ===========================================
# Parameters for each strategy pod

# ----- Global Settings -----
global:
  min_confidence_threshold: 0.3  # Don't output signals below this
  max_signals_per_day: 10        # Cap daily signal output
  signal_expiry_hours: 24        # Signals expire after 24h

# ----- Pod 1: FX Carry + Momentum -----
fx_carry_momentum:
  enabled: true
  instruments: ["EURUSD", "USDJPY", "GBPUSD", "AUDUSD"]
  
  # Carry parameters
  carry:
    min_carry_score: 0.5       # Minimum carry to consider
    carry_lookback_days: 30    # Period for carry calculation
    yield_source: "3m_libor"   # Source for yield differential
    
  # Momentum parameters
  momentum:
    periods: [21, 63, 126]     # 1mo, 3mo, 6mo in trading days
    weights: [0.5, 0.3, 0.2]   # Weight recent momentum more
    zscore_threshold: 1.0      # Signal when z-score > 1
    
  # Regime gating
  regime:
    use_vix_gate: true
    vix_risk_off_threshold: 25   # No carry trades when VIX > 25
    vix_lookback_percentile: 252 # 1-year percentile
    
  # Signal generation
  signal:
    holding_period_days: [7, 28]  # 1-4 weeks
    confidence_weights:
      carry: 0.4
      momentum: 0.4
      regime: 0.2

# ----- Pod 2: BTC Trend + Volatility -----
btc_trend_vol:
  enabled: true
  instruments: ["BTCUSD"]
  
  # Trend parameters
  trend:
    fast_ma: 50               # 50-day MA
    slow_ma: 200              # 200-day MA
    trend_strength_threshold: 0.02  # Price 2% above/below MA
    
  # Volatility breakout
  volatility:
    lookback_days: 90
    breakout_percentile: 90   # Vol > 90th percentile = breakout
    rv_period: 30             # 30-day realized vol
    
  # On-chain (requires Glassnode)
  onchain:
    enabled: false            # Enable when Glassnode connected
    exchange_flow_zscore: -1.0  # Negative = bullish (outflows)
    mvrv_threshold: 3.0       # MVRV > 3 = overvalued
    
  # Signal generation
  signal:
    holding_period_days: [14, 56]  # 2-8 weeks
    require_trend_confirmation: true

# ----- Pod 3: Commodities Term Structure -----
commodities_ts:
  enabled: true
  instruments: ["CL", "GC", "HG"]
  
  # Term structure
  term_structure:
    front_contract: 1         # CL1
    back_contract: 4          # CL4
    backwardation_threshold: 0.02  # 2% = significant backwardation
    contango_threshold: -0.02      # -2% = significant contango
    
  # Inventory
  inventory:
    lookback_years: 5         # Compare to 5-year average
    bullish_threshold: -0.10  # 10% below average = bullish
    bearish_threshold: 0.10   # 10% above average = bearish
    
  # Momentum overlay
  momentum:
    period: 63                # 3-month momentum
    threshold: 0.05           # 5% move
    
  # Signal generation
  signal:
    holding_period_days: [14, 42]  # 2-6 weeks
    require_ts_momentum_alignment: true

# ----- Pod 4: Cross-Asset Risk Sentiment -----
cross_asset_risk:
  enabled: true
  
  # Risk indicators
  indicators:
    vix:
      weight: 0.3
      risk_off_threshold: 20
      risk_on_threshold: 12
    credit_spreads:
      weight: 0.2
      ticker: "CDX IG"
      risk_off_threshold: 80  # bps
    dxy:
      weight: 0.2
      momentum_period: 21
    btc_gold_ratio:
      weight: 0.15
      momentum_period: 21
    spx_momentum:
      weight: 0.15
      period: 63
      
  # Regime classification
  regime:
    risk_on_threshold: 0.6    # Composite score > 0.6 = risk on
    risk_off_threshold: 0.4   # Composite score < 0.4 = risk off
    
  # Signal generation
  signal:
    holding_period_days: [7, 14]  # 1-2 weeks (tactical)
    output_type: "allocation"     # Affects portfolio sizing, not individual trades

# ----- Pod 5: Mean Reversion -----
mean_reversion:
  enabled: true
  instruments: ["EURUSD", "USDJPY", "GBPUSD", "AUDUSD", "BTCUSD", "CL", "GC"]
  
  # Spike detection
  spike:
    zscore_threshold: 3.0     # Daily return > 3 std devs
    lookback_days: 252        # 1-year for std dev calculation
    
  # Filters
  filters:
    require_no_catalyst: true # LLM verifies no fundamental news
    min_liquidity_rank: 0.8   # Top 20% liquidity only
    max_recent_signals: 2     # Don't overload same instrument
    
  # Risk (tighter for mean reversion)
  risk:
    max_holding_days: 5       # Exit within 5 days regardless
    stop_multiple: 1.5        # Tighter stop than trend strategies
    
  # Signal generation
  signal:
    holding_period_days: [1, 5]
    fade_direction: true      # Trade opposite to spike
