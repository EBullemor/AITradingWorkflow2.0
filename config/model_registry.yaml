# ===========================================
# Model Registry
# ===========================================
# Maps each strategy to its required features and signal logic.
# Use this to understand dependencies and impact of changes.

strategies:
  # ----- Pod 1: FX Carry + Momentum -----
  fx_carry_momentum:
    name: "FX Carry + Momentum"
    version: "1.0.0"
    description: "Regime-gated carry and momentum strategy for FX majors"
    
    instruments:
      - EURUSD
      - USDJPY
      - GBPUSD
      - AUDUSD
      
    features_required:
      - fx_carry
      - momentum_1m
      - momentum_3m
      - momentum_6m
      - momentum_zscore
      - realized_vol_30d
      - vix_regime
      - atr_14
      
    signal_logic: |
      LONG if:
        - fx_carry > 0.5 AND
        - momentum_3m > 0 AND
        - momentum_zscore > 1.0 AND
        - vix_regime != "risk_off"
      SHORT if:
        - fx_carry < -0.5 AND
        - momentum_3m < 0 AND
        - momentum_zscore < -1.0 AND
        - vix_regime != "risk_off"
        
    confidence_calculation: |
      base_confidence = 0.5
      + 0.1 * min(abs(fx_carry), 2) / 2          # Carry contribution
      + 0.2 * min(abs(momentum_zscore), 3) / 3   # Momentum contribution
      + 0.1 * (1 - vix_percentile)               # Regime bonus
      
    holding_period: "1-4 weeks"
    expected_hit_rate: 0.55
    expected_sharpe: 0.8

  # ----- Pod 2: BTC Trend + Volatility -----
  btc_trend_vol:
    name: "BTC Trend + Volatility Breakout"
    version: "1.0.0"
    description: "Trend following with vol regime detection for Bitcoin"
    
    instruments:
      - BTCUSD
      
    features_required:
      - momentum_1m
      - momentum_3m
      - realized_vol_30d
      - vol_percentile
      - atr_14
      # Optional (requires Glassnode):
      # - exchange_flow_zscore
      # - mvrv_ratio
      
    signal_logic: |
      LONG if:
        - price > 50-day MA AND
        - price > 200-day MA AND
        - vol_percentile > 0.90 (breakout) AND
        - momentum_1m > 0
      SHORT if:
        - price < 50-day MA AND
        - price < 200-day MA AND
        - vol_percentile > 0.90 (breakout) AND
        - momentum_1m < 0
        
    confidence_calculation: |
      base_confidence = 0.4
      + 0.2 * trend_strength                    # Distance from MA
      + 0.2 * vol_breakout_strength            # How extreme the vol spike
      + 0.1 * (exchange_flow_zscore < -1)      # On-chain confirmation
      
    holding_period: "2-8 weeks"
    expected_hit_rate: 0.50
    expected_sharpe: 0.7

  # ----- Pod 3: Commodities Term Structure -----
  commodities_ts:
    name: "Commodities Term Structure"
    version: "1.0.0"
    description: "Backwardation/contango signals for commodities"
    
    instruments:
      - CL
      - GC
      - HG
      
    features_required:
      - roll_yield
      - ts_slope
      - momentum_3m
      - realized_vol_30d
      - atr_14
      
    signal_logic: |
      LONG if:
        - ts_slope > 0.02 (backwardation) AND
        - momentum_3m > 0 AND
        - inventory < 5yr_average - 10%
      SHORT if:
        - ts_slope < -0.02 (contango) AND
        - momentum_3m < 0 AND
        - inventory > 5yr_average + 10%
        
    confidence_calculation: |
      base_confidence = 0.4
      + 0.2 * min(abs(ts_slope), 0.05) / 0.05  # TS contribution
      + 0.2 * inventory_zscore                  # Inventory contribution
      + 0.1 * momentum_alignment               # Momentum confirmation
      
    holding_period: "2-6 weeks"
    expected_hit_rate: 0.52
    expected_sharpe: 0.6

  # ----- Pod 4: Cross-Asset Risk -----
  cross_asset_risk:
    name: "Cross-Asset Risk Sentiment"
    version: "1.0.0"
    description: "Portfolio-level risk-on/off allocation signals"
    
    instruments: []  # Affects portfolio, not specific instruments
    
    features_required:
      - vix_regime
      - realized_vol_30d  # For credit proxy
      - momentum_3m       # For SPX, DXY, BTC/Gold
      
    signal_logic: |
      RISK_ON if:
        - composite_score > 0.6
      RISK_OFF if:
        - composite_score < 0.4
      NEUTRAL if:
        - 0.4 <= composite_score <= 0.6
        
    output_type: "allocation_multiplier"
    holding_period: "1-2 weeks"

  # ----- Pod 5: Mean Reversion -----
  mean_reversion:
    name: "Mean Reversion (Vol Spike)"
    version: "1.0.0"
    description: "Fade extreme moves without fundamental catalyst"
    
    instruments:
      - EURUSD
      - USDJPY
      - GBPUSD
      - AUDUSD
      - BTCUSD
      - CL
      - GC
      
    features_required:
      - realized_vol_30d
      - atr_14
      # LLM-derived:
      # - has_fundamental_catalyst (boolean)
      
    signal_logic: |
      FADE (opposite direction) if:
        - daily_return_zscore > 3.0 AND
        - no_fundamental_catalyst (LLM verified) AND
        - liquidity_rank > 0.8
        
    confidence_calculation: |
      base_confidence = 0.3
      + 0.3 * (zscore - 3) / 2                 # Extremity bonus
      + 0.2 * (1 - has_catalyst)               # No-news bonus
      
    holding_period: "1-5 days"
    expected_hit_rate: 0.58
    expected_sharpe: 0.5
    notes: "Higher hit rate but smaller wins due to tight stops"
